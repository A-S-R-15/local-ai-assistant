"use strict";(()=>{var e={};e.id=443,e.ids=[443],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9801:e=>{e.exports=require("os")},2928:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>k,patchFetch:()=>I,requestAsyncStorage:()=>w,routeModule:()=>g,serverHooks:()=>f,staticGenerationAsyncStorage:()=>y});var i={};r.r(i),r.d(i,{GET:()=>d,POST:()=>m,dynamic:()=>p});var a=r(921),s=r(7380),n=r(4185),o=r(3878),c=r(9502),l=r(909),u=r(4717),h=r(6516);let p="force-dynamic";async function m(e){try{let t;let{tool:r,action:i,parameters:a={}}=await e.json();if(!r||!i)return o.NextResponse.json({success:!1,error:"Tool and action are required"},{status:400});switch(r){case"time":if("current"===i)t=c.z.getCurrentTime();else throw Error(`Unknown time action: ${i}`);break;case"weather":if("current"===i){let e=a.location||"New York";t=l.O.getMockWeather(e)}else throw Error(`Unknown weather action: ${i}`);break;case"search":if("web"===i){let e=a.query||a.q;if(!e)throw Error("Search query is required");t=await u.P.search(e)}else throw Error(`Unknown search action: ${i}`);break;case"ip":if("info"===i)t=await h.M.getIPInfo();else throw Error(`Unknown IP action: ${i}`);break;default:throw Error(`Unknown tool: ${r}`)}return o.NextResponse.json({success:!0,tool:r,action:i,result:t,timestamp:new Date().toISOString()})}catch(e){return console.error("Tools API error:",e),o.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Tool execution failed"},{status:500})}}async function d(e){return o.NextResponse.json({success:!0,tools:[{name:"time",description:"Get current time and date information",actions:["current"]},{name:"weather",description:"Get weather information for any location",actions:["current"]},{name:"search",description:"Search the web for information",actions:["web"]},{name:"ip",description:"Get IP address and location information",actions:["info"]}],timestamp:new Date().toISOString()})}let g=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/tools/route",pathname:"/api/tools",filename:"route",bundlePath:"app/api/tools/route"},resolvedPagePath:"/home/ubuntu/local_ai_assistant_v3/app/app/api/tools/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:w,staticGenerationAsyncStorage:y,serverHooks:f}=g,k="/api/tools/route";function I(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:y})}},6516:(e,t,r)=>{r.d(t,{M:()=>i});class i{static{this.cache=new Map}static{this.cacheTimeout=3e5}static async getPublicIP(){try{for(let e of["https://api.ipify.org?format=json","https://ipapi.co/json/","https://httpbin.org/ip"])try{let t=await fetch(e);if(t.ok){let e=await t.json();return e.ip||e.origin}}catch(t){console.warn(`IP service ${e} failed:`,t);continue}throw Error("All IP services failed")}catch(e){return console.error("Failed to get public IP:",e),"Unknown"}}static async getIPInfo(e){let t=e||await this.getPublicIP(),r=this.cache.get(t);if(r&&Date.now()-r.timestamp<this.cacheTimeout)return r.data;try{let e=await fetch(`https://ipapi.co/${t}/json/`);if(!e.ok)throw Error(`IP API error: ${e.statusText}`);let r=await e.json(),i={ip:t,type:this.detectIPType(t),location:{country:r.country_name||"Unknown",region:r.region||"Unknown",city:r.city||"Unknown",latitude:r.latitude||0,longitude:r.longitude||0,timezone:r.timezone||"Unknown"},isp:r.org||"Unknown",organization:r.org||"Unknown",asn:r.asn||"Unknown",security:{isProxy:!1,isVpn:!1,isTor:!1,isThreat:!1}};return this.cache.set(t,{data:i,timestamp:Date.now()}),i}catch(e){return console.error("Failed to get IP info:",e),{ip:t,type:this.detectIPType(t),location:{country:"Unknown",region:"Unknown",city:"Unknown",latitude:0,longitude:0,timezone:"Unknown"},isp:"Unknown",organization:"Unknown",asn:"Unknown",security:{isProxy:!1,isVpn:!1,isTor:!1,isThreat:!1}}}}static detectIPType(e){return e.includes(":")?"IPv6":"IPv4"}static async getLocalIPs(){try{let e=r(9801).networkInterfaces(),t=[];return Object.values(e).forEach(e=>{e&&e.forEach(e=>{"IPv4"!==e.family||e.internal||t.push(e.address)})}),t}catch(e){console.error("Failed to get local IPs:",e)}return["Unable to detect local IPs in browser environment"]}static async checkIPReachability(e,t=5e3){try{let r=new AbortController,i=setTimeout(()=>r.abort(),t);return await fetch(`http://${e}`,{method:"HEAD",signal:r.signal,mode:"no-cors"}),clearTimeout(i),!0}catch(e){return!1}}static validateIP(e){return/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)||/^(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/.test(e)}static isPrivateIP(e){if(!this.validateIP(e))return!1;let t=e.split(".").map(Number);return 4===t.length&&(10===t[0]||172===t[0]&&t[1]>=16&&t[1]<=31||192===t[0]&&168===t[1]||127===t[0])}static async getNetworkInfo(){let e=await this.getPublicIP(),t=await this.getLocalIPs(),r=await this.getIPInfo(e);return{publicIP:e,localIPs:t,ipInfo:r}}static clearCache(){this.cache.clear()}}},4717:(e,t,r)=>{r.d(t,{P:()=>i});class i{static{this.serpApiKey=null}static{this.baseUrl="https://serpapi.com/search"}static setApiKey(e){this.serpApiKey=e}static async search(e,t={}){let r=Date.now();return this.serpApiKey?this.searchWithSerpApi(e,t,r):this.searchWithFallback(e,t,r)}static async searchWithSerpApi(e,t,r){try{let i=new URLSearchParams({q:e,api_key:this.serpApiKey,engine:t.engine||"google",num:(t.num||10).toString(),...t.location&&{location:t.location},...t.language&&{hl:t.language}}),a=await fetch(`${this.baseUrl}?${i}`);if(!a.ok)throw Error(`Search API error: ${a.statusText}`);let s=await a.json(),n=Date.now()-r,o=(s.organic_results||[]).map(e=>({title:e.title,url:e.link,snippet:e.snippet,source:new URL(e.link).hostname,timestamp:e.date}));return{query:e,results:o,totalResults:s.search_information?.total_results||o.length,searchTime:n,suggestions:s.related_searches?.map(e=>e.query)||[]}}catch(i){return console.error("SerpAPI search error:",i),this.searchWithFallback(e,t,r)}}static async searchWithFallback(e,t,r){try{let t=await fetch(`https://api.duckduckgo.com/?q=${encodeURIComponent(e)}&format=json&no_html=1&skip_disambig=1`,{signal:AbortSignal.timeout(1e4)});if(t.ok){let i=await t.json(),a=Date.now()-r,s=[];if(i.AbstractText&&s.push({title:i.Heading||e,url:i.AbstractURL||"",snippet:i.AbstractText,source:"DuckDuckGo",timestamp:new Date().toISOString()}),i.RelatedTopics&&i.RelatedTopics.slice(0,5).forEach(e=>{e.Text&&e.FirstURL&&s.push({title:e.Text.split(" - ")[0],url:e.FirstURL,snippet:e.Text,source:"DuckDuckGo",timestamp:new Date().toISOString()})}),s.length>0)return{query:e,results:s,totalResults:s.length,searchTime:a,suggestions:[]}}}catch(e){console.error("DuckDuckGo search error:",e)}try{let t=await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(e)}`,{signal:AbortSignal.timeout(8e3)});if(t.ok){let i=await t.json(),a=Date.now()-r;if(i.extract)return{query:e,results:[{title:i.title,url:i.content_urls?.desktop?.page||"",snippet:i.extract,source:"Wikipedia",timestamp:new Date().toISOString()}],totalResults:1,searchTime:a,suggestions:[]}}}catch(e){console.error("Wikipedia search error:",e)}try{let t=Date.now()-r,i=this.generateContextualResults(e);return{query:e,results:i,totalResults:i.length,searchTime:t,suggestions:this.generateSearchSuggestions(e)}}catch(e){console.error("Contextual search error:",e)}return this.getMockSearchResults(e,r)}static generateContextualResults(e){let t=e.toLowerCase(),r=[];return(t.includes("time")||t.includes("date")||t.includes("today"))&&r.push({title:"Current Time and Date Information",url:"https://time.is",snippet:`Current time: ${new Date().toLocaleString()}. For more precise time information, use the time tool in this assistant.`,source:"Time Service",timestamp:new Date().toISOString()}),(t.includes("weather")||t.includes("temperature")||t.includes("forecast"))&&r.push({title:"Weather Information",url:"https://weather.com",snippet:"For current weather information, use the weather tool in this assistant. Provide a location to get real-time weather data.",source:"Weather Service",timestamp:new Date().toISOString()}),(t.includes("programming")||t.includes("code")||t.includes("javascript")||t.includes("python"))&&r.push({title:"Programming and Development Resources",url:"https://developer.mozilla.org",snippet:"Find comprehensive programming documentation, tutorials, and examples. This assistant can also help with code questions directly.",source:"Developer Resources",timestamp:new Date().toISOString()}),(t.includes("news")||t.includes("latest")||t.includes("current events"))&&r.push({title:"Latest News and Current Events",url:"https://news.google.com",snippet:"For the most current news, visit major news websites. Note: This assistant provides general information but may not have the very latest breaking news.",source:"News Aggregator",timestamp:new Date().toISOString()}),0===r.length&&r.push({title:`Search Results for "${e}"`,url:"https://duckduckgo.com/?q="+encodeURIComponent(e),snippet:"For comprehensive web search results, try searching on DuckDuckGo, Google, or other search engines. This assistant can help answer questions directly.",source:"Search Guidance",timestamp:new Date().toISOString()}),r}static generateSearchSuggestions(e){return[`${e} tutorial`,`${e} guide`,`${e} examples`,`what is ${e}`,`how to ${e}`,`${e} 2024`].slice(0,3)}static getMockSearchResults(e,t){let r=Date.now()-t;return{query:e,results:[{title:`Search results for "${e}"`,url:"https://example.com",snippet:"Search functionality is currently in development. Please configure a search API key for full functionality.",source:"Local Assistant",timestamp:new Date().toISOString()}],totalResults:1,searchTime:r,suggestions:[`${e} tutorial`,`${e} guide`,`${e} examples`]}}static async searchNews(e,t={}){return this.search(`${e} news`,{...t,engine:"google"})}static async searchImages(e,t={}){return this.search(`${e} images`,{...t,engine:"google"})}}},9502:(e,t,r)=>{r.d(t,{z:()=>i});class i{static getCurrentTime(){let e=new Date,t=Intl.DateTimeFormat().resolvedOptions().timeZone;return{current:e.toLocaleString(),timezone:t,utc:e.toISOString(),timestamp:e.getTime(),formatted:{date:e.toLocaleDateString(),time:e.toLocaleTimeString(),full:e.toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"})}}}static formatTime(e,t){return new Date(e).toLocaleString()}static getTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone}static addTime(e,t){return new Date(new Date().getTime()+e*({minutes:6e4,hours:36e5,days:864e5,weeks:6048e5})[t])}}},909:(e,t,r)=>{r.d(t,{O:()=>i});class i{static{this.apiKey=null}static{this.baseUrl="https://api.openweathermap.org/data/2.5"}static setApiKey(e){this.apiKey=e}static async getCurrentWeather(e){if(!this.apiKey)throw Error("OpenWeatherMap API key not configured");try{let t=await fetch(`${this.baseUrl}/weather?q=${encodeURIComponent(e)}&appid=${this.apiKey}&units=metric`);if(!t.ok)throw Error(`Weather API error: ${t.statusText}`);let r=await t.json();return{location:`${r.name}, ${r.sys.country}`,temperature:Math.round(r.main.temp),description:r.weather[0].description,humidity:r.main.humidity,windSpeed:r.wind.speed,pressure:r.main.pressure,visibility:r.visibility/1e3,uvIndex:0,forecast:[]}}catch(e){throw console.error("Weather fetch error:",e),e}}static async getForecast(e,t=5){if(!this.apiKey)throw Error("OpenWeatherMap API key not configured");try{let r=await fetch(`${this.baseUrl}/forecast?q=${encodeURIComponent(e)}&appid=${this.apiKey}&units=metric&cnt=${8*t}`);if(!r.ok)throw Error(`Forecast API error: ${r.statusText}`);let i=await r.json(),a=[],s={};return i.list.forEach(e=>{let t=new Date(1e3*e.dt).toDateString();s[t]||(s[t]=[]),s[t].push(e)}),Object.entries(s).forEach(([e,t])=>{let r=t.map(e=>e.main.temp),i=Math.round(Math.max(...r)),s=Math.round(Math.min(...r)),n=t[0].weather[0].description,o=t.reduce((e,t)=>e+(t.rain?.["3h"]||0),0);a.push({date:e,high:i,low:s,description:n,precipitation:o})}),a.slice(0,t)}catch(e){throw console.error("Forecast fetch error:",e),e}}static getMockWeather(e){return{location:e,temperature:22,description:"Partly cloudy",humidity:65,windSpeed:5.2,pressure:1013,visibility:10,uvIndex:6,forecast:[{date:new Date().toDateString(),high:25,low:18,description:"Sunny",precipitation:0}]}}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[923,146],()=>r(2928));module.exports=i})();