"use strict";(()=>{var e={};e.id=818,e.ids=[818],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2789:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>y,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>w,staticGenerationAsyncStorage:()=>m});var a={};r.r(a),r.d(a,{GET:()=>p,POST:()=>h,dynamic:()=>u});var s=r(921),o=r(7380),n=r(4185),i=r(3878),c=r(909);let u="force-dynamic";async function p(e){try{let t;let{searchParams:r}=new URL(e.url),a=r.get("location");if(!a)return i.NextResponse.json({success:!1,error:"Location parameter is required"},{status:400});try{t=await c.O.getCurrentWeather(a)}catch(e){console.log("Weather API unavailable, using mock data:",e instanceof Error?e.message:"Unknown error"),t=c.O.getMockWeather(a)}return i.NextResponse.json({success:!0,data:t,timestamp:new Date().toISOString()})}catch(e){return console.error("Weather tool error:",e),i.NextResponse.json({success:!1,error:"Failed to get weather data",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function h(e){try{let t;let{location:r,action:a="current",days:s=5}=await e.json();if(!r)return i.NextResponse.json({success:!1,error:"Location is required"},{status:400});switch(a){case"current":try{t=await c.O.getCurrentWeather(r)}catch(e){console.log("Weather API unavailable, using mock data"),t=c.O.getMockWeather(r)}break;case"forecast":try{t=await c.O.getForecast(r,s)}catch(e){console.log("Weather forecast API unavailable, using mock data"),t=c.O.getMockWeather(r).forecast}break;default:return i.NextResponse.json({success:!1,error:"Invalid action"},{status:400})}return i.NextResponse.json({success:!0,data:t,timestamp:new Date().toISOString()})}catch(e){return console.error("Weather tool POST error:",e),i.NextResponse.json({success:!1,error:"Failed to process weather request",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/tools/weather/route",pathname:"/api/tools/weather",filename:"route",bundlePath:"app/api/tools/weather/route"},resolvedPagePath:"/home/ubuntu/local_ai_assistant_v3/app/app/api/tools/weather/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:w}=l,g="/api/tools/weather/route";function y(){return(0,n.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:m})}},909:(e,t,r)=>{r.d(t,{O:()=>a});class a{static{this.apiKey=null}static{this.baseUrl="https://api.openweathermap.org/data/2.5"}static setApiKey(e){this.apiKey=e}static async getCurrentWeather(e){if(!this.apiKey)throw Error("OpenWeatherMap API key not configured");try{let t=await fetch(`${this.baseUrl}/weather?q=${encodeURIComponent(e)}&appid=${this.apiKey}&units=metric`);if(!t.ok)throw Error(`Weather API error: ${t.statusText}`);let r=await t.json();return{location:`${r.name}, ${r.sys.country}`,temperature:Math.round(r.main.temp),description:r.weather[0].description,humidity:r.main.humidity,windSpeed:r.wind.speed,pressure:r.main.pressure,visibility:r.visibility/1e3,uvIndex:0,forecast:[]}}catch(e){throw console.error("Weather fetch error:",e),e}}static async getForecast(e,t=5){if(!this.apiKey)throw Error("OpenWeatherMap API key not configured");try{let r=await fetch(`${this.baseUrl}/forecast?q=${encodeURIComponent(e)}&appid=${this.apiKey}&units=metric&cnt=${8*t}`);if(!r.ok)throw Error(`Forecast API error: ${r.statusText}`);let a=await r.json(),s=[],o={};return a.list.forEach(e=>{let t=new Date(1e3*e.dt).toDateString();o[t]||(o[t]=[]),o[t].push(e)}),Object.entries(o).forEach(([e,t])=>{let r=t.map(e=>e.main.temp),a=Math.round(Math.max(...r)),o=Math.round(Math.min(...r)),n=t[0].weather[0].description,i=t.reduce((e,t)=>e+(t.rain?.["3h"]||0),0);s.push({date:e,high:a,low:o,description:n,precipitation:i})}),s.slice(0,t)}catch(e){throw console.error("Forecast fetch error:",e),e}}static getMockWeather(e){return{location:e,temperature:22,description:"Partly cloudy",humidity:65,windSpeed:5.2,pressure:1013,visibility:10,uvIndex:6,forecast:[{date:new Date().toDateString(),high:25,low:18,description:"Sunny",precipitation:0}]}}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[923,146],()=>r(2789));module.exports=a})();