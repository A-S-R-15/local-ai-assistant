"use strict";(()=>{var e={};e.id=641,e.ids=[641],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9801:e=>{e.exports=require("os")},8636:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>I,patchFetch:()=>g,requestAsyncStorage:()=>h,routeModule:()=>d,serverHooks:()=>w,staticGenerationAsyncStorage:()=>P});var r={};a.r(r),a.d(r,{GET:()=>u,POST:()=>p,dynamic:()=>l});var s=a(921),o=a(7380),i=a(4185),n=a(3878),c=a(6516);let l="force-dynamic";async function u(e){try{let t;let{searchParams:a}=new URL(e.url),r=a.get("ip");switch(a.get("action")||"info"){case"info":t=await c.M.getIPInfo(r||void 0);break;case"public":t={ip:await c.M.getPublicIP()};break;case"local":t={ips:await c.M.getLocalIPs()};break;case"network":t=await c.M.getNetworkInfo();break;default:return n.NextResponse.json({success:!1,error:"Invalid action"},{status:400})}return n.NextResponse.json({success:!0,data:t,timestamp:new Date().toISOString()})}catch(e){return console.error("IP tool error:",e),n.NextResponse.json({success:!1,error:"Failed to get IP information",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function p(e){try{let t;let{action:a,ip:r,timeout:s}=await e.json();switch(a){case"getInfo":t=await c.M.getIPInfo(r);break;case"getPublicIP":t={ip:await c.M.getPublicIP()};break;case"getLocalIPs":t={ips:await c.M.getLocalIPs()};break;case"getNetworkInfo":t=await c.M.getNetworkInfo();break;case"checkReachability":if(!r)return n.NextResponse.json({success:!1,error:"IP address is required for reachability check"},{status:400});t={ip:r,reachable:await c.M.checkIPReachability(r,s||5e3)};break;case"validateIP":if(!r)return n.NextResponse.json({success:!1,error:"IP address is required for validation"},{status:400});t={ip:r,valid:c.M.validateIP(r),isPrivate:c.M.isPrivateIP(r)};break;case"clearCache":c.M.clearCache(),t={message:"Cache cleared successfully"};break;default:return n.NextResponse.json({success:!1,error:"Invalid action"},{status:400})}return n.NextResponse.json({success:!0,data:t,timestamp:new Date().toISOString()})}catch(e){return console.error("IP tool POST error:",e),n.NextResponse.json({success:!1,error:"Failed to process IP request",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/tools/ip/route",pathname:"/api/tools/ip",filename:"route",bundlePath:"app/api/tools/ip/route"},resolvedPagePath:"/home/ubuntu/local_ai_assistant_v3/app/app/api/tools/ip/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:h,staticGenerationAsyncStorage:P,serverHooks:w}=d,I="/api/tools/ip/route";function g(){return(0,i.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:P})}},6516:(e,t,a)=>{a.d(t,{M:()=>r});class r{static{this.cache=new Map}static{this.cacheTimeout=3e5}static async getPublicIP(){try{for(let e of["https://api.ipify.org?format=json","https://ipapi.co/json/","https://httpbin.org/ip"])try{let t=await fetch(e);if(t.ok){let e=await t.json();return e.ip||e.origin}}catch(t){console.warn(`IP service ${e} failed:`,t);continue}throw Error("All IP services failed")}catch(e){return console.error("Failed to get public IP:",e),"Unknown"}}static async getIPInfo(e){let t=e||await this.getPublicIP(),a=this.cache.get(t);if(a&&Date.now()-a.timestamp<this.cacheTimeout)return a.data;try{let e=await fetch(`https://ipapi.co/${t}/json/`);if(!e.ok)throw Error(`IP API error: ${e.statusText}`);let a=await e.json(),r={ip:t,type:this.detectIPType(t),location:{country:a.country_name||"Unknown",region:a.region||"Unknown",city:a.city||"Unknown",latitude:a.latitude||0,longitude:a.longitude||0,timezone:a.timezone||"Unknown"},isp:a.org||"Unknown",organization:a.org||"Unknown",asn:a.asn||"Unknown",security:{isProxy:!1,isVpn:!1,isTor:!1,isThreat:!1}};return this.cache.set(t,{data:r,timestamp:Date.now()}),r}catch(e){return console.error("Failed to get IP info:",e),{ip:t,type:this.detectIPType(t),location:{country:"Unknown",region:"Unknown",city:"Unknown",latitude:0,longitude:0,timezone:"Unknown"},isp:"Unknown",organization:"Unknown",asn:"Unknown",security:{isProxy:!1,isVpn:!1,isTor:!1,isThreat:!1}}}}static detectIPType(e){return e.includes(":")?"IPv6":"IPv4"}static async getLocalIPs(){try{let e=a(9801).networkInterfaces(),t=[];return Object.values(e).forEach(e=>{e&&e.forEach(e=>{"IPv4"!==e.family||e.internal||t.push(e.address)})}),t}catch(e){console.error("Failed to get local IPs:",e)}return["Unable to detect local IPs in browser environment"]}static async checkIPReachability(e,t=5e3){try{let a=new AbortController,r=setTimeout(()=>a.abort(),t);return await fetch(`http://${e}`,{method:"HEAD",signal:a.signal,mode:"no-cors"}),clearTimeout(r),!0}catch(e){return!1}}static validateIP(e){return/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)||/^(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/.test(e)}static isPrivateIP(e){if(!this.validateIP(e))return!1;let t=e.split(".").map(Number);return 4===t.length&&(10===t[0]||172===t[0]&&t[1]>=16&&t[1]<=31||192===t[0]&&168===t[1]||127===t[0])}static async getNetworkInfo(){let e=await this.getPublicIP(),t=await this.getLocalIPs(),a=await this.getIPInfo(e);return{publicIP:e,localIPs:t,ipInfo:a}}static clearCache(){this.cache.clear()}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[923,146],()=>a(8636));module.exports=r})();